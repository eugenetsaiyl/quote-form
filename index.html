<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å ±åƒ¹è¡¨å–® - Pro Panel</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  min-height: 100vh;
  padding: 40px 20px;
  color: #fff;
}

.container {
  max-width: 600px;
  margin: 0 auto;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 20px;
  padding: 40px;
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

h1 {
  text-align: center;
  margin-bottom: 10px;
  font-size: 32px;
  color: #68EFFB;
  text-shadow: 0 0 20px rgba(104, 239, 251, 0.3);
}

.subtitle {
  text-align: center;
  margin-bottom: 40px;
  opacity: 0.7;
  font-size: 14px;
}

.form-group {
  margin-bottom: 25px;
}

.form-group.hidden {
  display: none;
}

label {
  display: block;
  margin-bottom: 10px;
  font-weight: 600;
  font-size: 14px;
  color: #68EFFB;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.floor-label {
  font-size: 16px;
  color: #68EFFB;
  margin: 30px 0 20px 0;
  padding-bottom: 10px;
  border-bottom: 2px solid rgba(104, 239, 251, 0.3);
}

input[type="text"],
input[type="number"],
textarea,
select {
  width: 100%;
  padding: 14px 18px;
  border: 2px solid rgba(104, 239, 251, 0.3);
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.05);
  color: #fff;
  font-size: 16px;
  transition: all 0.3s;
  font-family: inherit;
}

select {
  cursor: pointer;
}

input:focus,
textarea:focus,
select:focus {
  outline: none;
  border-color: #68EFFB;
  box-shadow: 0 0 20px rgba(104, 239, 251, 0.2);
}

textarea {
  resize: vertical;
  min-height: 80px;
}

.radio-group {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
}

.radio-option {
  flex: 1;
  min-width: 140px;
}

.radio-option input[type="radio"] {
  display: none;
}

.radio-option label {
  display: block;
  padding: 14px 20px;
  border: 2px solid rgba(104, 239, 251, 0.3);
  border-radius: 10px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s;
  background: rgba(255, 255, 255, 0.03);
  margin: 0;
  text-transform: none;
  letter-spacing: 0;
  font-size: 16px;
  font-weight: 500;
}

.radio-option input[type="radio"]:checked + label {
  background: rgba(104, 239, 251, 0.2);
  border-color: #68EFFB;
  box-shadow: 0 0 20px rgba(104, 239, 251, 0.3);
}

.radio-option label:hover {
  border-color: #68EFFB;
}

.price-display {
  padding: 14px 18px;
  border: 2px solid rgba(104, 239, 251, 0.5);
  border-radius: 10px;
  background: rgba(104, 239, 251, 0.1);
  color: #68EFFB;
  font-size: 20px;
  font-weight: 600;
  text-align: center;
  margin-top: 10px;
}

.special-price-input {
  display: none;
  margin-top: 10px;
}

.special-price-input.show {
  display: block;
}

.btn-group {
  display: flex;
  gap: 15px;
  margin-top: 35px;
}

button {
  flex: 1;
  padding: 16px 30px;
  border: none;
  border-radius: 10px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.btn-generate {
  background: linear-gradient(135deg, #68EFFB, #4ec9d6);
  color: #1a1a2e;
  box-shadow: 0 4px 20px rgba(104, 239, 251, 0.3);
}

.btn-generate:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 25px rgba(104, 239, 251, 0.4);
}

.btn-reset {
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
  border: 2px solid rgba(255, 255, 255, 0.3);
}

.btn-reset:hover {
  background: rgba(255, 255, 255, 0.15);
}

.output {
  margin-top: 30px;
  padding: 25px;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 10px;
  border: 2px solid rgba(104, 239, 251, 0.3);
  display: none;
}

.output.show {
  display: block;
}

.output-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.output-title {
  font-size: 14px;
  font-weight: 600;
  color: #68EFFB;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.btn-copy {
  padding: 8px 16px;
  background: rgba(104, 239, 251, 0.2);
  border: 1px solid #68EFFB;
  border-radius: 6px;
  color: #68EFFB;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.btn-copy:hover {
  background: rgba(104, 239, 251, 0.3);
}

.btn-copy.copied {
  background: rgba(104, 239, 251, 0.4);
}

.output-text {
  font-family: 'SF Mono', Monaco, monospace;
  font-size: 14px;
  line-height: 1.8;
  white-space: pre-wrap;
  color: rgba(255, 255, 255, 0.9);
}

.hint {
  text-align: center;
  margin-top: 20px;
  font-size: 13px;
  opacity: 0.6;
  font-style: italic;
}
</style>
</head>
<body>
<div class="container">
  <h1>ğŸ“‹ å ±åƒ¹è¡¨å–®</h1>
  <div class="subtitle">å¡«å¯«è³‡æ–™å¾Œç™¼é€çµ¦ Muse</div>
  
  <form id="quoteForm">
    <!-- å±¤æ•¸é¸æ“‡ -->
    <div class="form-group">
      <label>å±¤æ•¸</label>
      <div class="radio-group">
        <div class="radio-option">
          <input type="radio" id="single" name="storey" value="Single Storey" checked>
          <label for="single">Single Storey</label>
        </div>
        <div class="radio-option">
          <input type="radio" id="double" name="storey" value="Double Storey">
          <label for="double">Double Storey</label>
        </div>
      </div>
    </div>

    <!-- Single Storey ææ–™ -->
    <div id="singleMaterials" class="materials-section">
      <div class="form-group">
        <label>äº§å“ç±»å‹</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="single_propanel" name="single_product" value="Pro Panel" checked>
            <label for="single_propanel">Pro Panel</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="single_hebel" name="single_product" value="Hebel">
            <label for="single_hebel">CSR Hebel</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>åšåº¦</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="single_50mm" name="single_thickness" value="50mm" checked>
            <label for="single_50mm">50mm</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="single_75mm" name="single_thickness" value="75mm">
            <label for="single_75mm">75mm</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>Batten</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="single_24mm" name="single_batten" value="24mm" checked>
            <label for="single_24mm">24mm</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="single_35mm" name="single_batten" value="35mm">
            <label for="single_35mm">35mm</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>Render å±¤æ•¸</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="single_render2" name="single_render" value="2" checked>
            <label for="single_render2">2å±¤</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="single_render3" name="single_render" value="3">
            <label for="single_render3">3å±¤</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>åƒ¹æ ¼é¸é …</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="single_normalPrice" name="single_priceType" value="normal" checked>
            <label for="single_normalPrice">Normal Price</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="single_specialPrice" name="single_priceType" value="special">
            <label for="single_specialPrice">Special Price</label>
          </div>
        </div>
        <div id="single_priceDisplay" class="price-display">$110 / mÂ²</div>
        <div id="single_specialPriceInput" class="special-price-input">
          <input type="number" id="single_specialPriceValue" placeholder="è¼¸å…¥ç‰¹æ®Šå–®åƒ¹ï¼ˆä¾‹ï¼š105ï¼‰">
        </div>
      </div>

      <div class="form-group">
        <label>æ·¨é¢ç© (mÂ²)ï¼ˆé¸å¡«ï¼‰</label>
        <input type="number" id="single_netArea" placeholder="ä¾‹ï¼š150.5" step="0.01">
        <div class="hint" style="margin-top:8px; font-size:12px; opacity:0.7;">é¸å¡«ã€‚è‹¥æœªå¡«å¯«ï¼ŒMolly æœƒå¾ email ä¸­æŸ¥æ‰¾ã€‚å ±åƒ¹é¢ç© = æ·¨é¢ç© Ã— 1.08</div>
      </div>
    </div>

    <!-- Double Storey ææ–™ -->
    <div id="doubleMaterials" class="materials-section" style="display:none;">
      <!-- Ground Floor -->
      <div class="floor-label">Ground Floorï¼ˆä¸€æ¨“ï¼‰</div>
      
      <div class="form-group">
        <label>ç”¢å“é¡å‹</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="gf_propanel" name="gf_product" value="Pro Panel" checked>
            <label for="gf_propanel">Pro Panel</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="gf_hebel" name="gf_product" value="Hebel">
            <label for="gf_hebel">CSR Hebel</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>åšåº¦</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="gf_50mm" name="gf_thickness" value="50mm" checked>
            <label for="gf_50mm">50mm</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="gf_75mm" name="gf_thickness" value="75mm">
            <label for="gf_75mm">75mm</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>Batten</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="gf_24mm" name="gf_batten" value="24mm" checked>
            <label for="gf_24mm">24mm</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="gf_35mm" name="gf_batten" value="35mm">
            <label for="gf_35mm">35mm</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>Render å±¤æ•¸</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="gf_render2" name="gf_render" value="2" checked>
            <label for="gf_render2">2å±¤</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="gf_render3" name="gf_render" value="3">
            <label for="gf_render3">3å±¤</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>åƒ¹æ ¼é¸é …</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="gf_normalPrice" name="gf_priceType" value="normal" checked>
            <label for="gf_normalPrice">Normal Price</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="gf_specialPrice" name="gf_priceType" value="special">
            <label for="gf_specialPrice">Special Price</label>
          </div>
        </div>
        <div id="gf_priceDisplay" class="price-display">$110 / mÂ²</div>
        <div id="gf_specialPriceInput" class="special-price-input">
          <input type="number" id="gf_specialPriceValue" placeholder="è¼¸å…¥ç‰¹æ®Šå–®åƒ¹ï¼ˆä¾‹ï¼š105ï¼‰">
        </div>
      </div>

      <div class="form-group">
        <label>Ground Floor æ·¨é¢ç© (mÂ²)ï¼ˆé¸å¡«ï¼‰</label>
        <input type="number" id="gf_netArea" placeholder="ä¾‹ï¼š150.5" step="0.01">
        <div class="hint" style="margin-top:8px; font-size:12px; opacity:0.7;">é¸å¡«ã€‚è‹¥æœªå¡«å¯«ï¼ŒMolly æœƒå¾ email ä¸­æŸ¥æ‰¾ã€‚å ±åƒ¹é¢ç© = æ·¨é¢ç© Ã— 1.1</div>
      </div>

      <!-- First Floor -->
      <div class="floor-label">First Floorï¼ˆäºŒæ¨“ï¼‰</div>
      
      <div class="form-group">
        <label>ææ–™é¡å‹</label>
        <select id="ff_material" name="ff_material">
          <optgroup label="AAC">
            <option value="50mm Pro Panel">50mm Pro Panel</option>
            <option value="75mm Pro Panel">75mm Pro Panel</option>
            <option value="50mm Hebel">50mm CSR Hebel</option>
            <option value="75mm Hebel">75mm CSR Hebel</option>
          </optgroup>
          <optgroup label="Foam">
            <option value="75mm NRG Greenboard foam">75mm NRG Greenboard</option>
            <option value="100mm NRG Greenboard foam">100mm NRG Greenboard</option>
            <option value="75mm Masterwall foam">75mm Masterwall</option>
            <option value="100mm Masterwall foam">100mm Masterwall</option>
            <option value="75mm Unitex foam">75mm Unitex</option>
            <option value="100mm Unitex foam">100mm Unitex</option>
            <option value="75mm Dulux foam">75mm Dulux</option>
            <option value="100mm Dulux foam">100mm Dulux</option>
          </optgroup>
        </select>
      </div>

      <div class="form-group" id="ff_battenGroup">
        <label>Batten</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="ff_24mm" name="ff_batten" value="24mm" checked>
            <label for="ff_24mm">24mm</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="ff_35mm" name="ff_batten" value="35mm">
            <label for="ff_35mm">35mm</label>
          </div>
        </div>
      </div>

      <div class="form-group" id="ff_renderGroup">
        <label>Render å±¤æ•¸</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="ff_render2" name="ff_render" value="2" checked>
            <label for="ff_render2">2å±¤</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="ff_render3" name="ff_render" value="3">
            <label for="ff_render3">3å±¤</label>
          </div>
        </div>
        <div id="ff_foamNote" class="hint" style="display:none; margin-top:10px; opacity:0.8;">Foam å›ºå®šä½¿ç”¨ 3å±¤ render</div>
      </div>

      <div class="form-group">
        <label>åƒ¹æ ¼é¸é …</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="ff_normalPrice" name="ff_priceType" value="normal" checked>
            <label for="ff_normalPrice">Normal Price</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="ff_specialPrice" name="ff_priceType" value="special">
            <label for="ff_specialPrice">Special Price</label>
          </div>
        </div>
        <div id="ff_priceDisplay" class="price-display">$110 / mÂ²</div>
        <div id="ff_specialPriceInput" class="special-price-input">
          <input type="number" id="ff_specialPriceValue" placeholder="è¼¸å…¥ç‰¹æ®Šå–®åƒ¹ï¼ˆä¾‹ï¼š105ï¼‰">
        </div>
      </div>

      <div class="form-group">
        <label>First Floor æ·¨é¢ç© (mÂ²)ï¼ˆé¸å¡«ï¼‰</label>
        <input type="number" id="ff_netArea" placeholder="ä¾‹ï¼š120.3" step="0.01">
        <div class="hint" style="margin-top:8px; font-size:12px; opacity:0.7;">é¸å¡«ã€‚è‹¥æœªå¡«å¯«ï¼ŒMolly æœƒå¾ email ä¸­æŸ¥æ‰¾ã€‚å ±åƒ¹é¢ç© = æ·¨é¢ç© Ã— 1.1</div>
      </div>
    </div>

    <!-- é€šç”¨å­—æ®µ -->
    <div class="form-group">
      <label>Payment Terms</label>
      <div class="radio-group">
        <div class="radio-option">
          <input type="radio" id="normalTerms" name="paymentTerms" value="normal" checked>
          <label for="normalTerms">Normal Terms</label>
        </div>
        <div class="radio-option">
          <input type="radio" id="specialTerms" name="paymentTerms" value="special">
          <label for="specialTerms">Special Terms</label>
        </div>
        <div class="radio-option">
          <input type="radio" id="oneoffPayment" name="paymentTerms" value="oneoff">
          <label for="oneoffPayment">One-Off Payment</label>
        </div>
        <div class="radio-option">
          <input type="radio" id="noneTerms" name="paymentTerms" value="none">
          <label for="noneTerms">None</label>
        </div>
      </div>
      
      <!-- Special Terms è¼¸å…¥æ¡† -->
      <div id="specialTermsInputs" style="display:none; margin-top:15px;">
        <div style="display:flex; gap:10px;">
          <input type="number" id="installationPercent" placeholder="Installation %" style="flex:1;" min="0" max="100">
          <input type="number" id="basecoatPercent" placeholder="Basecoat %" style="flex:1;" min="0" max="100">
          <input type="number" id="texturePercent" placeholder="Texture %" style="flex:1;" min="0" max="100">
        </div>
        <div style="margin-top:8px; font-size:12px; opacity:0.7;">ç¸½å’Œå¿…é ˆç­‰æ–¼ 100%</div>
      </div>
    </div>

    <div class="form-group">
      <label>Builder å…¬å¸åç¨±</label>
      <input type="text" id="builder" placeholder="ä¾‹ï¼šTomorrow Homes" required>
    </div>

    <div class="form-group">
      <label>ABNï¼ˆé¸å¡«ï¼‰</label>
      <input type="text" id="abn" placeholder="ä¾‹ï¼š12 345 678 901">
    </div>

    <div class="form-group">
      <label>åœ°å€</label>
      <textarea id="address" placeholder="ä¾‹ï¼šLot 123, Street Name, Suburb VIC 3000" required></textarea>
    </div>

    <div class="form-group">
      <label>éœ€è¦ Blueboard å—ï¼Ÿ</label>
      <div class="radio-group">
        <div class="radio-option">
          <input type="radio" name="includeBlueboard" id="blueboard-yes" value="yes" checked>
          <label for="blueboard-yes">è¦</label>
        </div>
        <div class="radio-option">
          <input type="radio" name="includeBlueboard" id="blueboard-no" value="no">
          <label for="blueboard-no">ä¸è¦</label>
        </div>
      </div>
    </div>

    <div class="form-group">
      <label>Other Itemsï¼ˆé¸å¡«ï¼‰</label>
      <div id="otherItemsContainer">
        <div class="other-item" style="margin-bottom:15px;">
          <input type="text" class="other-desc" placeholder="Descriptionï¼ˆä¾‹ï¼šå›é ­è²»ï¼‰" style="margin-bottom:8px;">
          <div style="display:flex; gap:10px;">
            <input type="number" class="other-units" placeholder="No of units" style="flex:1;">
            <input type="number" class="other-price" placeholder="Unit price ($)" style="flex:1;">
          </div>
        </div>
      </div>
      <button type="button" id="addOtherItem" style="padding:8px 16px; background:rgba(104,239,251,0.2); border:1px solid #68EFFB; border-radius:6px; color:#68EFFB; font-size:14px; cursor:pointer; margin-top:10px;">+ æ–°å¢é …ç›®</button>
    </div>

    <div class="form-group">
      <label>å‚™è¨»ï¼ˆé¸å¡«ï¼‰</label>
      <textarea id="notes" placeholder="ä¾‹ï¼šç‰¹æ®Šè¦æ±‚ã€å·¥æœŸç­‰"></textarea>
    </div>

    <div class="btn-group">
      <button type="submit" class="btn-generate">ç”Ÿæˆå ±åƒ¹</button>
      <button type="reset" class="btn-reset">æ¸…ç©º</button>
    </div>
  </form>

  <div id="output" class="output">
    <div class="output-header">
      <div class="output-title">å ±åƒ¹å…§å®¹</div>
      <button type="button" class="btn-copy" onclick="copyToClipboard()">è¤‡è£½</button>
    </div>
    <div id="outputText" class="output-text"></div>
  </div>

  <div class="hint">ğŸ’¡ è¤‡è£½å¾Œç™¼çµ¦ Museï¼Œå¥¹æœƒæ•™ Molly è£½ä½œå ±åƒ¹å–®</div>
</div>

<script>
// å®šä»·è¡¨
const PRICING = {
  'Pro Panel': {
    '50mm': { '2å±¤': { 'Ground': 110, 'First': 112 }, '3å±¤': { 'Ground': 118, 'First': 120 } },
    '75mm': { '2å±¤': { 'Ground': 120, 'First': 122 }, '3å±¤': { 'Ground': 128, 'First': 130 } }
  },
  'Hebel': {
    '50mm': { '2å±¤': { 'Ground': 120, 'First': 122 }, '3å±¤': { 'Ground': 128, 'First': 130 } },
    '75mm': { '2å±¤': { 'Ground': 130, 'First': 132 }, '3å±¤': { 'Ground': 138, 'First': 140 } }
  },
  'Foam': { '75mm': 90, '100mm': 95 }
};

// åˆ‡æ› Single/Double
document.querySelectorAll('input[name="storey"]').forEach(input => {
  input.addEventListener('change', function() {
    const isSingle = this.value === 'Single Storey';
    document.getElementById('singleMaterials').style.display = isSingle ? 'block' : 'none';
    document.getElementById('doubleMaterials').style.display = isSingle ? 'none' : 'block';
  });
});

// Payment Terms åˆ‡æ›
document.querySelectorAll('input[name="paymentTerms"]').forEach(input => {
  input.addEventListener('change', function() {
    const specialTermsInputs = document.getElementById('specialTermsInputs');
    if (this.value === 'special') {
      specialTermsInputs.style.display = 'block';
    } else {
      specialTermsInputs.style.display = 'none';
    }
  });
});

// æ–°å¢ Other Item
document.getElementById('addOtherItem').addEventListener('click', function() {
  const container = document.getElementById('otherItemsContainer');
  const newItem = document.createElement('div');
  newItem.className = 'other-item';
  newItem.style.marginBottom = '15px';
  newItem.innerHTML = `
    <input type="text" class="other-desc" placeholder="Descriptionï¼ˆä¾‹ï¼šå›é ­è²»ï¼‰" style="margin-bottom:8px; width:100%; padding:14px 18px; border:2px solid rgba(104,239,251,0.3); border-radius:10px; background:rgba(255,255,255,0.05); color:#fff; font-size:16px; font-family:inherit;">
    <div style="display:flex; gap:10px;">
      <input type="number" class="other-units" placeholder="No of units" style="flex:1; padding:14px 18px; border:2px solid rgba(104,239,251,0.3); border-radius:10px; background:rgba(255,255,255,0.05); color:#fff; font-size:16px; font-family:inherit;">
      <input type="number" class="other-price" placeholder="Unit price ($)" style="flex:1; padding:14px 18px; border:2px solid rgba(104,239,251,0.3); border-radius:10px; background:rgba(255,255,255,0.05); color:#fff; font-size:16px; font-family:inherit;">
    </div>
  `;
  container.appendChild(newItem);
});

// Single Storey åƒ¹æ ¼æ›´æ–°
function updateSinglePrice() {
  const product = document.querySelector('input[name="single_product"]:checked').value;
  const thickness = document.querySelector('input[name="single_thickness"]:checked').value;
  const render = document.querySelector('input[name="single_render"]:checked').value;
  const priceType = document.querySelector('input[name="single_priceType"]:checked').value;
  
  // Single Storey è¦–ç‚º Ground Floor
  const renderCoats = render + 'å±¤';
  const normalPrice = PRICING[product][thickness][renderCoats]['Ground'];
  
  const priceDisplay = document.getElementById('single_priceDisplay');
  const specialPriceInput = document.getElementById('single_specialPriceInput');
  
  if (priceType === 'normal') {
    priceDisplay.style.display = 'block';
    priceDisplay.textContent = `$${normalPrice} / mÂ²`;
    specialPriceInput.classList.remove('show');
  } else {
    priceDisplay.style.display = 'none';
    specialPriceInput.classList.add('show');
  }
}

document.querySelectorAll('input[name="single_product"], input[name="single_thickness"], input[name="single_render"], input[name="single_priceType"]').forEach(input => {
  input.addEventListener('change', updateSinglePrice);
});

// Ground Floor åƒ¹æ ¼æ›´æ–°
function updateGFPrice() {
  const product = document.querySelector('input[name="gf_product"]:checked').value;
  const thickness = document.querySelector('input[name="gf_thickness"]:checked').value;
  const render = document.querySelector('input[name="gf_render"]:checked').value;
  const priceType = document.querySelector('input[name="gf_priceType"]:checked').value;
  
  const renderCoats = render + 'å±¤';
  const normalPrice = PRICING[product][thickness][renderCoats]['Ground'];
  
  const priceDisplay = document.getElementById('gf_priceDisplay');
  const specialPriceInput = document.getElementById('gf_specialPriceInput');
  
  if (priceType === 'normal') {
    priceDisplay.style.display = 'block';
    priceDisplay.textContent = `$${normalPrice} / mÂ²`;
    specialPriceInput.classList.remove('show');
  } else {
    priceDisplay.style.display = 'none';
    specialPriceInput.classList.add('show');
  }
}

document.querySelectorAll('input[name="gf_product"], input[name="gf_thickness"], input[name="gf_render"], input[name="gf_priceType"]').forEach(input => {
  input.addEventListener('change', updateGFPrice);
});

// First Floor ææ–™æ”¹è®Šæ™‚æ›´æ–°åƒ¹æ ¼ã€Batten å’Œ Render
document.getElementById('ff_material').addEventListener('change', function() {
  updateFFPrice();
  updateFFBatten();
  updateFFRender();
});

function updateFFPrice() {
  const material = document.getElementById('ff_material').value;
  const render = document.querySelector('input[name="ff_render"]:checked').value;
  const priceType = document.querySelector('input[name="ff_priceType"]:checked').value;
  
  let normalPrice;
  const isAAC = material.includes('Pro Panel') || material.includes('Hebel');
  
  if (isAAC) {
    // AAC: First Floor
    const product = material.includes('Pro Panel') ? 'Pro Panel' : 'Hebel';
    const thickness = material.includes('75mm') ? '75mm' : '50mm';
    const renderCoats = render + 'å±¤';
    normalPrice = PRICING[product][thickness][renderCoats]['First'];
  } else {
    // Foam (åŒ…æ‹¬ NRG Greenboard, Masterwall, Unitex, Dulux)
    const thickness = material.includes('100mm') ? '100mm' : '75mm';
    normalPrice = PRICING['Foam'][thickness]; // Foam ç„¡æ¨“å±¤åƒ¹å·®
  }
  
  const priceDisplay = document.getElementById('ff_priceDisplay');
  const specialPriceInput = document.getElementById('ff_specialPriceInput');
  
  if (priceType === 'normal') {
    priceDisplay.style.display = 'block';
    priceDisplay.textContent = `$${normalPrice} / mÂ²`;
    specialPriceInput.classList.remove('show');
  } else {
    priceDisplay.style.display = 'none';
    specialPriceInput.classList.add('show');
  }
}

function updateFFBatten() {
  const material = document.getElementById('ff_material').value;
  const isAAC = material.includes('Pro Panel') || material.includes('Hebel');
  const battenGroup = document.getElementById('ff_battenGroup');
  
  if (isAAC) {
    // AAC éœ€è¦ battenï¼Œé¡¯ç¤º
    battenGroup.style.display = 'block';
  } else {
    // Foam ä¸éœ€è¦ battenï¼Œéš±è—
    battenGroup.style.display = 'none';
  }
}

function updateFFRender() {
  const material = document.getElementById('ff_material').value;
  const isAAC = material.includes('Pro Panel') || material.includes('Hebel');
  const renderGroup = document.getElementById('ff_renderGroup');
  const foamNote = document.getElementById('ff_foamNote');
  
  if (isAAC) {
    // AAC é¡¯ç¤º 2/3å±¤é¸é …
    document.querySelectorAll('input[name="ff_render"]').forEach(input => {
      input.parentElement.parentElement.style.display = 'block';
    });
    foamNote.style.display = 'none';
  } else {
    // Foam å›ºå®š 3å±¤ï¼Œéš±è—é¸é …
    document.querySelectorAll('input[name="ff_render"]').forEach(input => {
      input.parentElement.parentElement.style.display = 'none';
    });
    document.getElementById('ff_render3').checked = true;
    foamNote.style.display = 'block';
  }
}

document.querySelectorAll('input[name="ff_render"], input[name="ff_priceType"]').forEach(input => {
  input.addEventListener('change', updateFFPrice);
});

// ç”Ÿæˆç•¶å¤©æ—¥æœŸï¼ˆDD/MM/YYYYï¼‰
function getTodayDate() {
  const today = new Date();
  const day = String(today.getDate()).padStart(2, '0');
  const month = String(today.getMonth() + 1).padStart(2, '0');
  const year = today.getFullYear();
  return `${day}/${month}/${year}`;
}

// ç”Ÿæˆç”¢å“æè¿°
function generateProductDescription(product, thickness, batten, renderCoats) {
  const isFoam = product.includes('foam') || product.includes('Greenboard') || 
                 product.includes('Masterwall') || product.includes('Unitex') || 
                 product.includes('Dulux');
  
  // Hebel â†’ CSR Hebel
  if (product === 'Hebel') {
    product = 'CSR Hebel';
  }
  
  let line1, line2;
  
  if (isFoam) {
    line1 = `- Supply & install ${thickness} ${product} including sundries and delivery`;
    line2 = `- Three coats rendering (Dulux) including two base coats with full mesh and 1 colour coat`;
  } else {
    const coatsNum = renderCoats.replace('å±¤', '');
    const baseCoats = coatsNum === '2' ? 'one base coat' : 'two base coats';
    const coatsText = coatsNum === '2' ? 'Two coats' : 'Three coats';
    
    line1 = `- Supply & install ${thickness} ${product} with ${batten} batten including sundries, caulking, and delivery`;
    line2 = `- ${coatsText} rendering (Dulux) including ${baseCoats} with joint mesh and 1 colour coat`;
  }
  
  return `${line1}\n${line2}`;
}

// è¡¨å•æäº¤
document.getElementById('quoteForm').addEventListener('submit', function(e) {
  e.preventDefault();
  
  const storey = document.querySelector('input[name="storey"]:checked').value;
  const paymentTerms = document.querySelector('input[name="paymentTerms"]:checked').value;
  const builder = document.getElementById('builder').value;
  const abn = document.getElementById('abn').value;
  const address = document.getElementById('address').value;
  const notes = document.getElementById('notes').value;
  
  let output = `æ–°å ±åƒ¹è«‹æ±‚\n\n`;
  output += `Issue Dateï¼š${getTodayDate()}\n\n`;
  output += `Customer: ${builder}\n`;
  if (abn) {
    output += `ABN: ${abn}\n`;
  }
  output += `\n=== MYOB Line Items å¡«å¯« ===\n`;
  output += `âš ï¸ æŒ‰é †åºå¡«å…¥ MYOB çš„æ¯ä¸€è¡Œï¼ˆå¾ç¬¬ä¸€è¡Œé–‹å§‹ï¼‰\n\n`;
  output += `â–¼ Line 1 â†’ åœ°å€\n`;
  output += `Description: ${address}\n`;
  output += `Category: 4-9000\n\n`;
  output += `å±¤æ•¸ï¼š${storey}\n\n`;
  
  if (storey === 'Single Storey') {
    const product = document.querySelector('input[name="single_product"]:checked').value;
    const thickness = document.querySelector('input[name="single_thickness"]:checked').value;
    const batten = document.querySelector('input[name="single_batten"]:checked').value;
    const render = document.querySelector('input[name="single_render"]:checked').value;
    const priceType = document.querySelector('input[name="single_priceType"]:checked').value;
    
    let price;
    if (priceType === 'normal') {
      // Single Storey è¦–ç‚º Ground Floor
      const renderCoats = render + 'å±¤';
      const normalPrice = PRICING[product][thickness][renderCoats]['Ground'];
      price = `$${normalPrice} (Normal Price)`;
    } else {
      const specialValue = document.getElementById('single_specialPriceValue').value;
      if (!specialValue) {
        alert('è«‹è¼¸å…¥ç‰¹æ®Šå–®åƒ¹');
        return;
      }
      price = `$${specialValue} (Special Price)`;
    }
    
    const displayProduct = product === 'Hebel' ? 'CSR Hebel' : product;
    output += `ç”¢å“ï¼š${displayProduct} ${thickness}, ${batten} batten, ${render}å±¤ render\n\n`;
    
    output += `â–¼ Line 2 â†’ Ground Floor ç”¢å“\n`;
    output += `Description:\n`;
    output += generateProductDescription(product, thickness, batten, render);
    output += `\nCategory: 4-9000\n`;
    
    const single_netArea = document.getElementById('single_netArea').value;
    if (single_netArea) {
      const quoteArea = (parseFloat(single_netArea) * 1.08).toFixed(2);
      output += `Units: ${quoteArea}\n`;
    } else {
      output += `Units: [éœ€è¦é¢ç©]\n`;
    }
    
    const displayPrice = priceType === 'normal' ? price.replace('$', '').replace(' (Normal Price)', '') : price.replace('$', '').replace(' (Special Price)', '');
    output += `Unit Price: $${displayPrice}\n`;
  } else {
    // Ground Floor
    const gf_product = document.querySelector('input[name="gf_product"]:checked').value;
    const gf_thickness = document.querySelector('input[name="gf_thickness"]:checked').value;
    const gf_batten = document.querySelector('input[name="gf_batten"]:checked').value;
    const gf_render = document.querySelector('input[name="gf_render"]:checked').value;
    const gf_priceType = document.querySelector('input[name="gf_priceType"]:checked').value;
    
    let gf_price;
    if (gf_priceType === 'normal') {
      const renderCoats = gf_render + 'å±¤';
      const normalPrice = PRICING[gf_product][gf_thickness][renderCoats]['Ground'];
      gf_price = `$${normalPrice} (Normal Price)`;
    } else {
      const specialValue = document.getElementById('gf_specialPriceValue').value;
      if (!specialValue) {
        alert('è«‹è¼¸å…¥ Ground Floor ç‰¹æ®Šå–®åƒ¹');
        return;
      }
      gf_price = `$${specialValue} (Special Price)`;
    }
    
    const gf_displayProduct = gf_product === 'Hebel' ? 'CSR Hebel' : gf_product;
    output += `Ground Floorï¼š${gf_displayProduct} ${gf_thickness}, ${gf_batten} batten, ${gf_render}å±¤ render\n\n`;
    
    output += `â–¼ Line 2 â†’ Ground Floor ç”¢å“\n`;
    output += `Description:\n`;
    output += generateProductDescription(gf_product, gf_thickness, gf_batten, gf_render);
    output += `\nCategory: 4-9000\n`;
    
    const gf_netArea = document.getElementById('gf_netArea').value;
    if (gf_netArea) {
      const gf_quoteArea = (parseFloat(gf_netArea) * 1.1).toFixed(2);
      output += `Units: ${gf_quoteArea}\n`;
    } else {
      output += `Units: [éœ€è¦é¢ç©]\n`;
    }
    
    const gf_displayPrice = gf_priceType === 'normal' ? gf_price.replace('$', '').replace(' (Normal Price)', '') : gf_price.replace('$', '').replace(' (Special Price)', '');
    output += `Unit Price: $${gf_displayPrice}\n\n`;
    
    // First Floor
    const ff_material = document.getElementById('ff_material').value;
    const ff_batten = document.querySelector('input[name="ff_batten"]:checked') ? document.querySelector('input[name="ff_batten"]:checked').value : null;
    const ff_render = document.querySelector('input[name="ff_render"]:checked').value;
    const ff_priceType = document.querySelector('input[name="ff_priceType"]:checked').value;
    
    let ff_price;
    if (ff_priceType === 'normal') {
      if (ff_material.includes('foam')) {
        const thickness = ff_material.includes('100mm') ? '100mm' : '75mm';
        ff_price = `$${PRICING['Foam'][thickness]} (Normal Price)`;
      } else {
        // AAC: First Floor
        const product = ff_material.includes('Pro Panel') ? 'Pro Panel' : 'Hebel';
        const thickness = ff_material.includes('75mm') ? '75mm' : '50mm';
        const renderCoats = ff_render + 'å±¤';
        const normalPrice = PRICING[product][thickness][renderCoats]['First'];
        ff_price = `$${normalPrice} (Normal Price)`;
      }
    } else {
      const specialValue = document.getElementById('ff_specialPriceValue').value;
      if (!specialValue) {
        alert('è«‹è¼¸å…¥ First Floor ç‰¹æ®Šå–®åƒ¹');
        return;
      }
      ff_price = `$${specialValue} (Special Price)`;
    }
    
    const ff_displayMaterial = ff_material.replace(' foam', '').replace('Hebel', 'CSR Hebel');
    const isFoam = ff_material.includes('foam');
    
    if (isFoam) {
      output += `First Floorï¼š${ff_displayMaterial}, ${ff_render}å±¤ render\n\n`;
    } else {
      output += `First Floorï¼š${ff_displayMaterial}, ${ff_batten} batten, ${ff_render}å±¤ render\n\n`;
    }
    
    output += `â–¼ Line 3 â†’ First Floor ç”¢å“\n`;
    output += `Description:\n`;
    // è§£æ ff_material æ ¼å¼ï¼ˆä¾‹å¦‚ï¼š"75mm Pro Panel" æˆ– "100mm NRG Greenboard foam"ï¼‰
    let ff_product, ff_thickness, ff_battenValue;
    if (isFoam) {
      const match = ff_material.match(/(\d+mm)\s+(.+)/);
      if (match) {
        ff_thickness = match[1];
        ff_product = match[2].replace(' foam', '');  // å»æ‰ " foam"
      } else {
        ff_thickness = '75mm';
        ff_product = ff_material.replace(' foam', '');
      }
      ff_battenValue = null;
    } else {
      const match = ff_material.match(/(\d+mm)\s+(.+)/);
      if (match) {
        ff_thickness = match[1];
        ff_product = match[2];
      } else {
        ff_thickness = '75mm';
        ff_product = ff_material;
      }
      ff_battenValue = ff_batten || '24mm';
    }
    output += generateProductDescription(ff_product, ff_thickness, ff_battenValue, ff_render);
    output += `\nCategory: 4-9000\n`;
    
    const ff_netArea = document.getElementById('ff_netArea').value;
    if (ff_netArea) {
      const ff_quoteArea = (parseFloat(ff_netArea) * 1.1).toFixed(2);
      output += `Units: ${ff_quoteArea}\n`;
    } else {
      output += `Units: [éœ€è¦é¢ç©]\n`;
    }
    
    const ff_displayPrice = ff_priceType === 'normal' ? ff_price.replace('$', '').replace(' (Normal Price)', '') : ff_price.replace('$', '').replace(' (Special Price)', '');
    output += `Unit Price: $${ff_displayPrice}\n`;
  }
  
  // Blueboardï¼ˆæ ¹æ“šé¸é …æ±ºå®šæ˜¯å¦è¼¸å‡ºï¼‰
  const includeBlueboard = document.querySelector('input[name="includeBlueboard"]:checked').value;
  if (includeBlueboard === 'yes') {
    output += `\n\nBlueboardï¼š\n\n`;
    output += `â–¼ ä¸‹ä¸€è¡Œ â†’ Blueboard\n`;
    output += `Description:\n`;
    output += `- Supply & Install & blueboards around garage opening and inside\n`;
    output += `- Three coats rendering (Dulux) including two base coats with joint mesh and 1 colour coat\n`;
    output += `Category: 4-9000\n`;
    output += `Units: 7\n`;
    output += `Unit Price: $45\n`;
  }
  
  // Other Items
  const otherItems = document.querySelectorAll('.other-item');
  let hasOtherItems = false;
  otherItems.forEach((item, index) => {
    const desc = item.querySelector('.other-desc').value.trim();
    const units = item.querySelector('.other-units').value.trim();
    const price = item.querySelector('.other-price').value.trim();
    
    if (desc && units && price) {
      if (!hasOtherItems) {
        output += `\nOther Itemsï¼š\n\n`;
        hasOtherItems = true;
      }
      output += `â–¼ ä¸‹ä¸€è¡Œ â†’ Other Item ${index + 1}\n`;
      output += `Description:\n${desc}\n`;
      output += `Category: 4-9000\n`;
      output += `Units: ${units}\n`;
      output += `Unit Price: $${price}\n\n`;
    }
  });
  
  // Note å€å¡Šï¼ˆçµ±ä¸€æ¨™é¡Œï¼ŒåŒ…å« notes + payment termsï¼‰
  const hasNoteContent = notes || paymentTerms !== 'none';
  if (hasNoteContent) {
    output += `\nNote:\n`;
    
    // å¦‚æœæœ‰ notesï¼Œå…ˆè¼¸å‡º
    if (notes) {
      output += `${notes}\n\n`;
    }
    
    // å¦‚æœæœ‰ payment termsï¼Œè¼¸å‡º
    if (paymentTerms !== 'none') {
      output += `Payment Termsï¼š\n`;
      
      if (paymentTerms === 'normal') {
        if (storey === 'Single Storey') {
          output += `40% Deposit\n`;
          output += `30% upon completion of Panel installation\n`;
          output += `30% upon completion of Render\n`;
        } else {
          output += `Progress Payment Terms (per level): Each level will be invoiced separately based on the following stage payments:\n`;
          output += `- 40% Deposit\n`;
          output += `- 30% upon completion of Panel installation\n`;
          output += `- 30% upon completion of Render\n`;
        }
      } else if (paymentTerms === 'special') {
        const installation = parseInt(document.getElementById('installationPercent').value) || 0;
        const basecoat = parseInt(document.getElementById('basecoatPercent').value) || 0;
        const texture = parseInt(document.getElementById('texturePercent').value) || 0;
        
        // é©—è­‰ç¸½å’Œå¿…é ˆç­‰æ–¼ 100
        const total = installation + basecoat + texture;
        if (total !== 100) {
          alert(`Payment Terms ç¸½å’Œå¿…é ˆç­‰æ–¼ 100%ï¼ˆç›®å‰ï¼š${total}%ï¼‰`);
          return;
        }
        
        if (storey === 'Single Storey') {
          if (installation > 0) output += `${installation}% upon completion of installation\n`;
          
          // å¦‚æœ basecoat å’Œ texture éƒ½æœ‰å€¼ï¼Œåˆ†é–‹é¡¯ç¤ºï¼›å¦å‰‡åˆä½µæˆ rendering
          if (basecoat > 0 && texture > 0) {
            output += `${basecoat}% upon completion of basecoat\n`;
            output += `${texture}% upon completion of texture\n`;
          } else if (basecoat > 0 || texture > 0) {
            const renderingPercent = basecoat + texture;
            output += `${renderingPercent}% upon completion of rendering\n`;
          }
        } else {
          output += `Progress Payment Terms (per level): Each level will be invoiced separately based on the following stage payments:\n`;
          if (installation > 0) output += `- ${installation}% upon completion of installation\n`;
          
          // å¦‚æœ basecoat å’Œ texture éƒ½æœ‰å€¼ï¼Œåˆ†é–‹é¡¯ç¤ºï¼›å¦å‰‡åˆä½µæˆ rendering
          if (basecoat > 0 && texture > 0) {
            output += `- ${basecoat}% upon completion of basecoat\n`;
            output += `- ${texture}% upon completion of texture\n`;
          } else if (basecoat > 0 || texture > 0) {
            const renderingPercent = basecoat + texture;
            output += `- ${renderingPercent}% upon completion of rendering\n`;
          }
        }
      } else if (paymentTerms === 'oneoff') {
        output += `100% upon completion\n`;
      }
    }
  }
  
  output += `\nè«‹è£½ä½œå ±åƒ¹å–®`;
  
  document.getElementById('outputText').textContent = output;
  document.getElementById('output').classList.add('show');
  document.getElementById('output').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
});

// é‡ç½®è¡¨å•
document.getElementById('quoteForm').addEventListener('reset', function() {
  document.getElementById('output').classList.remove('show');
  document.querySelector('.btn-copy').textContent = 'å¤åˆ¶';
  document.querySelector('.btn-copy').classList.remove('copied');
  setTimeout(() => {
    updateSinglePrice();
    updateGFPrice();
    updateFFPrice();
    updateFFRender();
  }, 10);
});

// å¤åˆ¶åˆ°å‰ªè´´æ¿
function copyToClipboard() {
  const text = document.getElementById('outputText').textContent;
  navigator.clipboard.writeText(text).then(function() {
    const btn = document.querySelector('.btn-copy');
    btn.textContent = 'å·²å¤åˆ¶ âœ“';
    btn.classList.add('copied');
    setTimeout(function() {
      btn.textContent = 'å¤åˆ¶';
      btn.classList.remove('copied');
    }, 2000);
  });
}

// Cloudflare Worker è‡ªå‹•ç™¼é€åŠŸèƒ½å·²ç§»é™¤
// æ”¹å›æ‰‹å‹•è¤‡è£½å ±åƒ¹å…§å®¹ç™¼çµ¦ Muse

// åˆå§‹åŒ–
updateSinglePrice();
updateGFPrice();
updateFFPrice();
updateFFBatten();
updateFFRender();
</script>
</body>
</html>
