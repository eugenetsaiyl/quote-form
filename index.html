<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å ±åƒ¹è¡¨å–® - Pro Panel</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  min-height: 100vh;
  padding: 40px 20px;
  color: #fff;
}

.container {
  max-width: 600px;
  margin: 0 auto;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 20px;
  padding: 40px;
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

h1 {
  text-align: center;
  margin-bottom: 10px;
  font-size: 32px;
  color: #68EFFB;
  text-shadow: 0 0 20px rgba(104, 239, 251, 0.3);
}

.subtitle {
  text-align: center;
  margin-bottom: 40px;
  opacity: 0.7;
  font-size: 14px;
}

.form-group {
  margin-bottom: 25px;
}

.form-group.hidden {
  display: none;
}

label {
  display: block;
  margin-bottom: 10px;
  font-weight: 600;
  font-size: 14px;
  color: #68EFFB;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.floor-label {
  font-size: 16px;
  color: #68EFFB;
  margin: 30px 0 20px 0;
  padding-bottom: 10px;
  border-bottom: 2px solid rgba(104, 239, 251, 0.3);
}

input[type="text"],
input[type="number"],
textarea,
select {
  width: 100%;
  padding: 14px 18px;
  border: 2px solid rgba(104, 239, 251, 0.3);
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.05);
  color: #fff;
  font-size: 16px;
  transition: all 0.3s;
  font-family: inherit;
}

select {
  cursor: pointer;
}

input:focus,
textarea:focus,
select:focus {
  outline: none;
  border-color: #68EFFB;
  box-shadow: 0 0 20px rgba(104, 239, 251, 0.2);
}

textarea {
  resize: vertical;
  min-height: 80px;
}

.radio-group {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
}

.radio-option {
  flex: 1;
  min-width: 140px;
}

.radio-option input[type="radio"] {
  display: none;
}

.radio-option label {
  display: block;
  padding: 14px 20px;
  border: 2px solid rgba(104, 239, 251, 0.3);
  border-radius: 10px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s;
  background: rgba(255, 255, 255, 0.03);
  margin: 0;
  text-transform: none;
  letter-spacing: 0;
  font-size: 16px;
  font-weight: 500;
}

.radio-option input[type="radio"]:checked + label {
  background: rgba(104, 239, 251, 0.2);
  border-color: #68EFFB;
  box-shadow: 0 0 20px rgba(104, 239, 251, 0.3);
}

.radio-option label:hover {
  border-color: #68EFFB;
}

.price-display {
  padding: 14px 18px;
  border: 2px solid rgba(104, 239, 251, 0.5);
  border-radius: 10px;
  background: rgba(104, 239, 251, 0.1);
  color: #68EFFB;
  font-size: 20px;
  font-weight: 600;
  text-align: center;
  margin-top: 10px;
}

.special-price-input {
  display: none;
  margin-top: 10px;
}

.special-price-input.show {
  display: block;
}

.btn-group {
  display: flex;
  gap: 15px;
  margin-top: 35px;
}

button {
  flex: 1;
  padding: 16px 30px;
  border: none;
  border-radius: 10px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.btn-generate {
  background: linear-gradient(135deg, #68EFFB, #4ec9d6);
  color: #1a1a2e;
  box-shadow: 0 4px 20px rgba(104, 239, 251, 0.3);
}

.btn-generate:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 25px rgba(104, 239, 251, 0.4);
}

.btn-reset {
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
  border: 2px solid rgba(255, 255, 255, 0.3);
}

.btn-reset:hover {
  background: rgba(255, 255, 255, 0.15);
}

.output {
  margin-top: 30px;
  padding: 25px;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 10px;
  border: 2px solid rgba(104, 239, 251, 0.3);
  display: none;
}

.output.show {
  display: block;
}

.output-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.output-title {
  font-size: 14px;
  font-weight: 600;
  color: #68EFFB;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.btn-copy {
  padding: 8px 16px;
  background: rgba(104, 239, 251, 0.2);
  border: 1px solid #68EFFB;
  border-radius: 6px;
  color: #68EFFB;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.btn-copy:hover {
  background: rgba(104, 239, 251, 0.3);
}

.btn-copy.copied {
  background: rgba(104, 239, 251, 0.4);
}

.output-text {
  font-family: 'SF Mono', Monaco, monospace;
  font-size: 14px;
  line-height: 1.8;
  white-space: pre-wrap;
  color: rgba(255, 255, 255, 0.9);
}

.hint {
  text-align: center;
  margin-top: 20px;
  font-size: 13px;
  opacity: 0.6;
  font-style: italic;
}
</style>
</head>
<body>
<div class="container">
  <h1>ğŸ“‹ å ±åƒ¹è¡¨å–®</h1>
  <div class="subtitle">å¡«å¯«è³‡æ–™å¾Œç™¼é€çµ¦ Muse</div>
  
  <form id="quoteForm">
    <!-- å±¤æ•¸é¸æ“‡ -->
    <div class="form-group">
      <label>å±¤æ•¸</label>
      <div class="radio-group">
        <div class="radio-option">
          <input type="radio" id="single" name="storey" value="Single Storey" checked>
          <label for="single">Single Storey</label>
        </div>
        <div class="radio-option">
          <input type="radio" id="double" name="storey" value="Double Storey">
          <label for="double">Double Storey</label>
        </div>
      </div>
    </div>

    <!-- Single Storey ææ–™ -->
    <div id="singleMaterials" class="materials-section">
      <div class="form-group">
        <label>ç”¢å“é¡å‹</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="single_propanel" name="single_product" value="Pro Panel" checked>
            <label for="single_propanel">Pro Panel</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="single_hebel" name="single_product" value="Hebel">
            <label for="single_hebel">Hebel</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>åšåº¦</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="single_50mm" name="single_thickness" value="50mm" checked>
            <label for="single_50mm">50mm</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="single_75mm" name="single_thickness" value="75mm">
            <label for="single_75mm">75mm</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>Batten åšåº¦</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="single_batten24" name="single_batten" value="24mm" checked>
            <label for="single_batten24">24mm</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="single_batten35" name="single_batten" value="35mm">
            <label for="single_batten35">35mm</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>Render å±¤æ•¸</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="single_render2" name="single_render" value="2" checked>
            <label for="single_render2">2å±¤</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="single_render3" name="single_render" value="3">
            <label for="single_render3">3å±¤</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>åƒ¹æ ¼é¸é …</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="single_normalPrice" name="single_priceType" value="normal" checked>
            <label for="single_normalPrice">Normal Price</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="single_specialPrice" name="single_priceType" value="special">
            <label for="single_specialPrice">Special Price</label>
          </div>
        </div>
        <div id="single_priceDisplay" class="price-display">$110 / mÂ²</div>
        <div id="single_specialPriceInput" class="special-price-input">
          <input type="number" id="single_specialPriceValue" placeholder="è¼¸å…¥ç‰¹æ®Šå–®åƒ¹ï¼ˆä¾‹ï¼š105ï¼‰">
        </div>
      </div>
    </div>

    <!-- Double Storey ææ–™ -->
    <div id="doubleMaterials" class="materials-section" style="display:none;">
      <!-- Ground Floor -->
      <div class="floor-label">Ground Floorï¼ˆä¸€æ¨“ï¼‰</div>
      
      <div class="form-group">
        <label>ç”¢å“é¡å‹</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="gf_propanel" name="gf_product" value="Pro Panel" checked>
            <label for="gf_propanel">Pro Panel</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="gf_hebel" name="gf_product" value="Hebel">
            <label for="gf_hebel">Hebel</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>åšåº¦</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="gf_50mm" name="gf_thickness" value="50mm" checked>
            <label for="gf_50mm">50mm</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="gf_75mm" name="gf_thickness" value="75mm">
            <label for="gf_75mm">75mm</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>Batten åšåº¦</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="gf_batten24" name="gf_batten" value="24mm" checked>
            <label for="gf_batten24">24mm</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="gf_batten35" name="gf_batten" value="35mm">
            <label for="gf_batten35">35mm</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>Render å±¤æ•¸</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="gf_render2" name="gf_render" value="2" checked>
            <label for="gf_render2">2å±¤</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="gf_render3" name="gf_render" value="3">
            <label for="gf_render3">3å±¤</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>åƒ¹æ ¼é¸é …</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="gf_normalPrice" name="gf_priceType" value="normal" checked>
            <label for="gf_normalPrice">Normal Price</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="gf_specialPrice" name="gf_priceType" value="special">
            <label for="gf_specialPrice">Special Price</label>
          </div>
        </div>
        <div id="gf_priceDisplay" class="price-display">$110 / mÂ²</div>
        <div id="gf_specialPriceInput" class="special-price-input">
          <input type="number" id="gf_specialPriceValue" placeholder="è¼¸å…¥ç‰¹æ®Šå–®åƒ¹ï¼ˆä¾‹ï¼š105ï¼‰">
        </div>
      </div>

      <!-- First Floor -->
      <div class="floor-label">First Floorï¼ˆäºŒæ¨“ï¼‰</div>
      
      <div class="form-group">
        <label>ææ–™é¡å‹</label>
        <select id="ff_material" name="ff_material">
          <optgroup label="AAC">
            <option value="Pro Panel 50mm">Pro Panel 50mm</option>
            <option value="Pro Panel 75mm">Pro Panel 75mm</option>
            <option value="Hebel 50mm">Hebel 50mm</option>
            <option value="Hebel 75mm">Hebel 75mm</option>
          </optgroup>
          <optgroup label="Foam">
            <option value="NRG Greenboard 75mm">NRG Greenboard 75mm</option>
            <option value="NRG Greenboard 100mm">NRG Greenboard 100mm</option>
            <option value="Masterwall foam 75mm">Masterwall foam 75mm</option>
            <option value="Masterwall foam 100mm">Masterwall foam 100mm</option>
            <option value="Unitex foam 75mm">Unitex foam 75mm</option>
            <option value="Unitex foam 100mm">Unitex foam 100mm</option>
            <option value="Dulux foam 75mm">Dulux foam 75mm</option>
            <option value="Dulux foam 100mm">Dulux foam 100mm</option>
          </optgroup>
        </select>
      </div>

      <div class="form-group" id="ff_battenGroup">
        <label>Batten åšåº¦</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="ff_batten24" name="ff_batten" value="24mm" checked>
            <label for="ff_batten24">24mm</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="ff_batten35" name="ff_batten" value="35mm">
            <label for="ff_batten35">35mm</label>
          </div>
        </div>
      </div>

      <div class="form-group" id="ff_renderGroup">
        <label>Render å±¤æ•¸</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="ff_render2" name="ff_render" value="2" checked>
            <label for="ff_render2">2å±¤</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="ff_render3" name="ff_render" value="3">
            <label for="ff_render3">3å±¤</label>
          </div>
        </div>
        <div id="ff_foamNote" class="hint" style="display:none; margin-top:10px; opacity:0.8;">Foam å›ºå®šä½¿ç”¨ 3å±¤ render</div>
      </div>

      <div class="form-group">
        <label>åƒ¹æ ¼é¸é …</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="ff_normalPrice" name="ff_priceType" value="normal" checked>
            <label for="ff_normalPrice">Normal Price</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="ff_specialPrice" name="ff_priceType" value="special">
            <label for="ff_specialPrice">Special Price</label>
          </div>
        </div>
        <div id="ff_priceDisplay" class="price-display">$110 / mÂ²</div>
        <div id="ff_specialPriceInput" class="special-price-input">
          <input type="number" id="ff_specialPriceValue" placeholder="è¼¸å…¥ç‰¹æ®Šå–®åƒ¹ï¼ˆä¾‹ï¼š105ï¼‰">
        </div>
      </div>
    </div>

    <!-- é€šç”¨æ¬„ä½ -->
    <div class="form-group">
      <label>Builder å…¬å¸åç¨±</label>
      <input type="text" id="builder" placeholder="ä¾‹ï¼šTomorrow Homes" required>
    </div>

    <div class="form-group">
      <label>åœ°å€</label>
      <textarea id="address" placeholder="ä¾‹ï¼šLot 123, Street Name, Suburb VIC 3000" required></textarea>
    </div>

    <!-- Single Storey æ·¨é¢ç© -->
    <div class="form-group" id="singleNetArea">
      <label>æ·¨é¢ç©ï¼ˆé¸å¡«ï¼Œå–®ä½ï¼šmÂ²ï¼‰</label>
      <input type="number" id="single_netArea" placeholder="ä¾‹ï¼š150ï¼ˆä¸å¡«å‰‡å¾ email æª”æ¡ˆä¸­æŸ¥æ‰¾ï¼‰" step="0.01">
    </div>

    <!-- Double Storey æ·¨é¢ç© -->
    <div id="doubleNetArea" style="display:none;">
      <div class="form-group">
        <label>Ground Floor æ·¨é¢ç©ï¼ˆé¸å¡«ï¼Œå–®ä½ï¼šmÂ²ï¼‰</label>
        <input type="number" id="gf_netArea" placeholder="ä¾‹ï¼š80" step="0.01">
      </div>
      <div class="form-group">
        <label>First Floor æ·¨é¢ç©ï¼ˆé¸å¡«ï¼Œå–®ä½ï¼šmÂ²ï¼‰</label>
        <input type="number" id="ff_netArea" placeholder="ä¾‹ï¼š70" step="0.01">
      </div>
    </div>

    <div class="form-group">
      <label>å‚™è¨»ï¼ˆé¸å¡«ï¼‰</label>
      <textarea id="notes" placeholder="ä¾‹ï¼šç‰¹æ®Šè¦æ±‚ã€å·¥æœŸç­‰"></textarea>
    </div>

    <div class="btn-group">
      <button type="submit" class="btn-generate">ç”Ÿæˆå ±åƒ¹</button>
      <button type="reset" class="btn-reset">æ¸…ç©º</button>
    </div>
  </form>

  <div id="output" class="output">
    <div class="output-header">
      <div class="output-title">å ±åƒ¹å…§å®¹</div>
      <button type="button" class="btn-copy" onclick="copyToClipboard()">è¤‡è£½</button>
    </div>
    <div id="outputText" class="output-text"></div>
  </div>

  <div class="hint">ğŸ’¡ è¤‡è£½å¾Œç™¼çµ¦ Museï¼Œå¥¹æœƒæ•™ Molly è£½ä½œå ±åƒ¹å–®</div>
</div>

<script>
// å®šåƒ¹è¡¨
const PRICING = {
  'Pro Panel': { '50mm': { '2': 110, '3': 118 }, '75mm': { '2': 120, '3': 128 } },
  'Hebel': { '50mm': { '2': 120, '3': 128 }, '75mm': { '2': 130, '3': 138 } },
  'Foam': { '75mm': 90, '100mm': 95 } // æ‰€æœ‰æ³¡æ²«ï¼ˆå›ºå®š3å±¤ï¼‰
};

// åˆ‡æ› Single/Double
document.querySelectorAll('input[name="storey"]').forEach(input => {
  input.addEventListener('change', function() {
    const isSingle = this.value === 'Single Storey';
    document.getElementById('singleMaterials').style.display = isSingle ? 'block' : 'none';
    document.getElementById('doubleMaterials').style.display = isSingle ? 'none' : 'block';
    document.getElementById('singleNetArea').style.display = isSingle ? 'block' : 'none';
    document.getElementById('doubleNetArea').style.display = isSingle ? 'none' : 'block';
  });
});

// Single Storey åƒ¹æ ¼æ›´æ–°
function updateSinglePrice() {
  const product = document.querySelector('input[name="single_product"]:checked').value;
  const thickness = document.querySelector('input[name="single_thickness"]:checked').value;
  const render = document.querySelector('input[name="single_render"]:checked').value;
  const priceType = document.querySelector('input[name="single_priceType"]:checked').value;
  
  const normalPrice = PRICING[product][thickness][render];
  const priceDisplay = document.getElementById('single_priceDisplay');
  const specialPriceInput = document.getElementById('single_specialPriceInput');
  
  if (priceType === 'normal') {
    priceDisplay.style.display = 'block';
    priceDisplay.textContent = `$${normalPrice} / mÂ² (${render}å±¤)`;
    specialPriceInput.classList.remove('show');
  } else {
    priceDisplay.style.display = 'none';
    specialPriceInput.classList.add('show');
  }
}

document.querySelectorAll('input[name="single_product"], input[name="single_thickness"], input[name="single_render"], input[name="single_priceType"]').forEach(input => {
  input.addEventListener('change', updateSinglePrice);
});

// Ground Floor åƒ¹æ ¼æ›´æ–°
function updateGFPrice() {
  const product = document.querySelector('input[name="gf_product"]:checked').value;
  const thickness = document.querySelector('input[name="gf_thickness"]:checked').value;
  const render = document.querySelector('input[name="gf_render"]:checked').value;
  const priceType = document.querySelector('input[name="gf_priceType"]:checked').value;
  
  const normalPrice = PRICING[product][thickness][render];
  const priceDisplay = document.getElementById('gf_priceDisplay');
  const specialPriceInput = document.getElementById('gf_specialPriceInput');
  
  if (priceType === 'normal') {
    priceDisplay.style.display = 'block';
    priceDisplay.textContent = `$${normalPrice} / mÂ² (${render}å±¤)`;
    specialPriceInput.classList.remove('show');
  } else {
    priceDisplay.style.display = 'none';
    specialPriceInput.classList.add('show');
  }
}

document.querySelectorAll('input[name="gf_product"], input[name="gf_thickness"], input[name="gf_render"], input[name="gf_priceType"]').forEach(input => {
  input.addEventListener('change', updateGFPrice);
});

// First Floor ææ–™æ”¹è®Šæ™‚æ›´æ–°åƒ¹æ ¼å’Œ Render
document.getElementById('ff_material').addEventListener('change', function() {
  updateFFPrice();
  updateFFRender();
});

function updateFFPrice() {
  const material = document.getElementById('ff_material').value;
  const priceType = document.querySelector('input[name="ff_priceType"]:checked').value;
  const render = document.querySelector('input[name="ff_render"]:checked').value;
  
  let normalPrice;
  const isFoam = material.includes('foam') || material.includes('Greenboard');
  const isAAC = material.includes('Pro Panel') || material.includes('Hebel');
  
  if (isFoam) {
    // æ‰€æœ‰æ³¡æ²«ï¼šå›ºå®šåƒ¹æ ¼
    const thickness = material.includes('100mm') ? '100mm' : '75mm';
    normalPrice = PRICING['Foam'][thickness];
  } else if (isAAC) {
    // AAC: First Floor +$2
    const product = material.includes('Pro Panel') ? 'Pro Panel' : 'Hebel';
    const thickness = material.includes('75mm') ? '75mm' : '50mm';
    normalPrice = PRICING[product][thickness][render] + 2;
  }
  
  const priceDisplay = document.getElementById('ff_priceDisplay');
  const specialPriceInput = document.getElementById('ff_specialPriceInput');
  
  if (priceType === 'normal') {
    priceDisplay.style.display = 'block';
    if (isFoam) {
      priceDisplay.textContent = `$${normalPrice} / mÂ² (3å±¤å›ºå®š)`;
    } else if (isAAC) {
      priceDisplay.textContent = `$${normalPrice} / mÂ² (${render}å±¤, 2æ¨“+$2)`;
    }
    specialPriceInput.classList.remove('show');
  } else {
    priceDisplay.style.display = 'none';
    specialPriceInput.classList.add('show');
  }
}

function updateFFRender() {
  const material = document.getElementById('ff_material').value;
  const isFoam = material.includes('foam') || material.includes('Greenboard');
  const foamNote = document.getElementById('ff_foamNote');
  const battenGroup = document.getElementById('ff_battenGroup');
  
  if (isFoam) {
    // æ‰€æœ‰æ³¡æ²«ï¼šéš±è— battenï¼Œå›ºå®š 3å±¤ render
    battenGroup.style.display = 'none';
    document.querySelectorAll('input[name="ff_render"]').forEach(input => {
      input.disabled = true;
      input.parentElement.style.opacity = '0.5';
      input.parentElement.style.cursor = 'not-allowed';
    });
    document.getElementById('ff_render3').checked = true;
    foamNote.style.display = 'block';
  } else {
    // AAC: é¡¯ç¤º battenï¼Œå•Ÿç”¨ 2/3å±¤é¸é …
    battenGroup.style.display = 'block';
    document.querySelectorAll('input[name="ff_render"]').forEach(input => {
      input.disabled = false;
      input.parentElement.style.opacity = '1';
      input.parentElement.style.cursor = 'pointer';
    });
    foamNote.style.display = 'none';
  }
}

document.querySelectorAll('input[name="ff_render"], input[name="ff_priceType"]').forEach(input => {
  input.addEventListener('change', updateFFPrice);
});

// è¡¨å–®æäº¤
document.getElementById('quoteForm').addEventListener('submit', function(e) {
  e.preventDefault();
  
  const storey = document.querySelector('input[name="storey"]:checked').value;
  const builder = document.getElementById('builder').value;
  const address = document.getElementById('address').value;
  const notes = document.getElementById('notes').value;
  
  let output = `æ–°å ±åƒ¹è«‹æ±‚\n\n`;
  output += `å±¤æ•¸ï¼š${storey}\n\n`;
  
  if (storey === 'Single Storey') {
    const product = document.querySelector('input[name="single_product"]:checked').value;
    const thickness = document.querySelector('input[name="single_thickness"]:checked').value;
    const batten = document.querySelector('input[name="single_batten"]:checked').value;
    const render = document.querySelector('input[name="single_render"]:checked').value;
    const priceType = document.querySelector('input[name="single_priceType"]:checked').value;
    
    let price;
    if (priceType === 'normal') {
      price = `$${PRICING[product][thickness][render]} (Normal Price, ${render}å±¤)`;
    } else {
      const specialValue = document.getElementById('single_specialPriceValue').value;
      if (!specialValue) {
        alert('è«‹è¼¸å…¥ç‰¹æ®Šå–®åƒ¹');
        return;
      }
      price = `$${specialValue} (Special Price, ${render}å±¤)`;
    }
    
    output += `ç”¢å“ï¼š${product} ${thickness}\n`;
    output += `Battenï¼š${batten}\n`;
    output += `Renderï¼š${render}å±¤\n`;
    output += `å–®åƒ¹ï¼š${price}\n`;
    
    const single_netArea = document.getElementById('single_netArea').value;
    if (single_netArea) {
      output += `æ·¨é¢ç©ï¼š${single_netArea} mÂ²\n`;
    }
  } else {
    // Ground Floor
    const gf_product = document.querySelector('input[name="gf_product"]:checked').value;
    const gf_thickness = document.querySelector('input[name="gf_thickness"]:checked').value;
    const gf_batten = document.querySelector('input[name="gf_batten"]:checked').value;
    const gf_render = document.querySelector('input[name="gf_render"]:checked').value;
    const gf_priceType = document.querySelector('input[name="gf_priceType"]:checked').value;
    
    let gf_price;
    if (gf_priceType === 'normal') {
      gf_price = `$${PRICING[gf_product][gf_thickness][gf_render]} (Normal Price, ${gf_render}å±¤)`;
    } else {
      const specialValue = document.getElementById('gf_specialPriceValue').value;
      if (!specialValue) {
        alert('è«‹è¼¸å…¥ Ground Floor ç‰¹æ®Šå–®åƒ¹');
        return;
      }
      gf_price = `$${specialValue} (Special Price, ${gf_render}å±¤)`;
    }
    
    output += `Ground Floorï¼š${gf_product} ${gf_thickness}\n`;
    output += `Ground Floor Battenï¼š${gf_batten}\n`;
    output += `Ground Floor Renderï¼š${gf_render}å±¤\n`;
    output += `Ground Floor å–®åƒ¹ï¼š${gf_price}\n`;
    
    const gf_netArea = document.getElementById('gf_netArea').value;
    if (gf_netArea) {
      output += `Ground Floor æ·¨é¢ç©ï¼š${gf_netArea} mÂ²\n`;
    }
    output += `\n`;
    
    // First Floor
    const ff_material = document.getElementById('ff_material').value;
    const ff_render = document.querySelector('input[name="ff_render"]:checked').value;
    const ff_priceType = document.querySelector('input[name="ff_priceType"]:checked').value;
    const isFoam = ff_material.includes('foam') || ff_material.includes('Greenboard');
    const isAAC = ff_material.includes('Pro Panel') || ff_material.includes('Hebel');
    
    let ff_price;
    
    if (ff_priceType === 'normal') {
      if (isFoam) {
        const thickness = ff_material.includes('100mm') ? '100mm' : '75mm';
        ff_price = `$${PRICING['Foam'][thickness]} (Normal Price, 3å±¤å›ºå®š)`;
      } else if (isAAC) {
        const product = ff_material.includes('Pro Panel') ? 'Pro Panel' : 'Hebel';
        const thickness = ff_material.includes('75mm') ? '75mm' : '50mm';
        const basePrice = PRICING[product][thickness][ff_render];
        ff_price = `$${basePrice + 2} (Normal Price, ${ff_render}å±¤, 2æ¨“+$2)`;
      }
    } else {
      const specialValue = document.getElementById('ff_specialPriceValue').value;
      if (!specialValue) {
        alert('è«‹è¼¸å…¥ First Floor ç‰¹æ®Šå–®åƒ¹');
        return;
      }
      let renderNote = isFoam ? '3å±¤å›ºå®š' : (isAAC ? ff_render + 'å±¤, 2æ¨“' : ff_render + 'å±¤');
      ff_price = `$${specialValue} (Special Price, ${renderNote})`;
    }
    
    output += `First Floorï¼š${ff_material}\n`;
    if (!isFoam) {
      const ff_batten = document.querySelector('input[name="ff_batten"]:checked').value;
      output += `First Floor Battenï¼š${ff_batten}\n`;
    }
    output += `First Floor Renderï¼š${ff_render}å±¤\n`;
    output += `First Floor å–®åƒ¹ï¼š${ff_price}\n`;
    
    const ff_netArea = document.getElementById('ff_netArea').value;
    if (ff_netArea) {
      output += `First Floor æ·¨é¢ç©ï¼š${ff_netArea} mÂ²\n`;
    }
  }
  
  output += `\nBuilderï¼š${builder}\n`;
  output += `åœ°å€ï¼š${address}\n`;
  if (notes) {
    output += `å‚™è¨»ï¼š${notes}\n`;
  }
  
  // æª¢æŸ¥æ˜¯å¦æœ‰ç¼ºå¤±çš„æ·¨é¢ç©
  let missingArea = false;
  if (storey === 'Single Storey') {
    missingArea = !document.getElementById('single_netArea').value;
  } else {
    const gf_area = document.getElementById('gf_netArea').value;
    const ff_area = document.getElementById('ff_netArea').value;
    if (!gf_area || !ff_area) {
      missingArea = true;
      output += `\nç¼ºå¤±æ·¨é¢ç©ï¼š`;
      if (!gf_area && !ff_area) {
        output += `Ground Floor + First Floor`;
      } else if (!gf_area) {
        output += `Ground Floor`;
      } else {
        output += `First Floor`;
      }
    }
  }
  
  output += `\n\nè«‹è£½ä½œå ±åƒ¹å–®`;
  if (missingArea) {
    output += `\nï¼ˆéœ€å¾ email æª”æ¡ˆä¸­æŸ¥æ‰¾æ·¨é¢ç©ï¼‰`;
  }
  
  document.getElementById('outputText').textContent = output;
  document.getElementById('output').classList.add('show');
  document.getElementById('output').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
});

// é‡ç½®è¡¨å–®
document.getElementById('quoteForm').addEventListener('reset', function() {
  document.getElementById('output').classList.remove('show');
  document.querySelector('.btn-copy').textContent = 'è¤‡è£½';
  document.querySelector('.btn-copy').classList.remove('copied');
  setTimeout(() => {
    updateSinglePrice();
    updateGFPrice();
    updateFFPrice();
    updateFFRender();
  }, 10);
});

// è¤‡è£½åˆ°å‰ªè²¼æ¿
function copyToClipboard() {
  const text = document.getElementById('outputText').textContent;
  navigator.clipboard.writeText(text).then(function() {
    const btn = document.querySelector('.btn-copy');
    btn.textContent = 'å·²è¤‡è£½ âœ“';
    btn.classList.add('copied');
    setTimeout(function() {
      btn.textContent = 'è¤‡è£½';
      btn.classList.remove('copied');
    }, 2000);
  });
}

// åˆå§‹åŒ–
updateSinglePrice();
updateGFPrice();
updateFFPrice();
updateFFRender();
</script>
</body>
</html>
